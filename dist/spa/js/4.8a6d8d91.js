(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{},[t("steps")],1)},r=[],s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"q-pa-xl"},[t("q-form",{staticClass:"q-gutter-md"},[t("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:""},scopedSlots:e._u([{key:"navigation",fn:function(){return[t("q-stepper-navigation",[t("q-btn",{attrs:{color:"primary",label:2===e.step?"Entrar":"Proximo"},on:{click:function(a){return e.nextStep()}}}),e.step>1?t("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Voltar"},on:{click:function(a){return e.$refs.stepper.previous()}}}):e._e()],1)]},proxy:!0}]),model:{value:e.step,callback:function(a){e.step=a},expression:"step"}},[t("q-step",{attrs:{name:1,title:"Email",icon:"email",done:e.step>1}},[t("q-input",{ref:"email",attrs:{filled:"",autofocus:"",type:"email",label:"Seu email",loading:e.emailInput.loadingState,rules:[function(e){return""!==e.email||"Digite um Email"},function(e){return-1!==e.indexOf("@")||"Digite um Email Válido"},e.checkEmail,function(a){return e.emailInput.errorEmail||"Não existe usuario com este email"},function(e){return e.indexOf("@")!==e.length-1||"Digite um Email Válido"}]},model:{value:e.formulario.email,callback:function(a){e.$set(e.formulario,"email",a)},expression:"formulario.email"}})],1),t("q-step",{attrs:{name:2,title:"Senha",icon:"password",done:e.step>2}},[t("q-input",{ref:"senha",attrs:{filled:"",label:"Sua senha",type:e.isPwd?"password":"text"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(a){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.formulario.senha,callback:function(a){e.$set(e.formulario,"senha",a)},expression:"formulario.senha"}})],1)],1)],1)],1)},o=[],n=(t("e6cf"),t("758b")),l={data(){return{step:1,isPwd:!0,formulario:{senha:"",email:"",idCliente:"",passwordhash:""},emailInput:{loadingState:!1,errorEmail:!0}}},methods:{async getUrl(){return n["a"].post("index.php",{action:"login_direct_user",uid:this.formulario.idCliente}).then((e=>{if("success"===e.data.result)return this.url=e.data.redirect_url,window.location.href=this.url,!0;console.log("Erro nos dados informados")})).catch((e=>{console.log(e)})),!1},async login(){this.$refs.senha.hasError||""===this.formulario.senha?this.mostrarMensagem("Para continuar, por favor informe uma senha."):n["a"].post("index.php",{action:"login",email:this.formulario.email,senha:this.formulario.senha}).then((e=>{"success"===e.data.result?(this.formulario.idCliente=e.data.userid,this.formulario.passwordhash=e.data.passwordhash,this.getUrl()):"Email or Password Invalid"===e.data.message&&this.mostrarMensagem("E-mail ou senha inválido")})).catch((e=>{console.log(e)}))},nextStep(){1===this.step&&(this.emailInput.errorEmail=!1,this.$refs.email.hasError?(this.mostrarMensagem("Para continuar, por favor informe um email válido."),this.$refs.email.focus()):this.checkEmail(this.formulario.email,!0))},async checkEmail(e=this.formulario.email,a=!1){n["a"].post("index.php",{action:"email_search_not_phone",email:this.formulario.email}).then((e=>"success"===e.data.result?(this.emailInput.errorEmail=!0,this.$refs.email.validate(),a&&this.$refs.stepper.next(),!0):"notin"===e.data.result?(this.emailInput.errorEmail=!1,this.$refs.email.validate(),!1):void 0)).catch((e=>{console.log(e)}))},mostrarMensagem(e){this.$q.notify({progress:!0,message:e,color:"primary",multiLine:!0,actions:[{label:"Entendi",color:"yellow",handler:()=>{}}]})}}},m=l,u=t("2877"),c=t("0378"),p=t("f531"),h=t("87fe"),d=t("27f9"),f=t("0016"),g=t("b19c"),v=t("9c40"),E=t("eebe"),b=t.n(E),w=Object(u["a"])(m,s,o,!1,null,null,null),x=w.exports;b()(w,"components",{QForm:c["a"],QStepper:p["a"],QStep:h["a"],QInput:d["a"],QIcon:f["a"],QStepperNavigation:g["a"],QBtn:v["a"]});var y={components:{steps:x},name:"PageIndex",created(){},methods:{}},q=y,_=t("9989"),k=Object(u["a"])(q,i,r,!1,null,null,null);a["default"]=k.exports;b()(k,"components",{QPage:_["a"]})}}]);