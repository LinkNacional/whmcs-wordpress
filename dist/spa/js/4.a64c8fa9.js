(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("q-page",{staticClass:"flex flex-center"},[t("steps")],1)},o=[],r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"q-pa-md"},[t("q-form",{staticClass:"q-gutter-md"},[t("q-stepper",{ref:"stepper",attrs:{"header-nav":"",color:"primary",animated:""},scopedSlots:e._u([{key:"navigation",fn:function(){return[t("q-stepper-navigation",[t("q-btn",{attrs:{color:"primary",label:2===e.step?"Entrar":"Proximo"},on:{click:function(a){return e.nextStep()}}}),e.step>1?t("q-btn",{staticClass:"q-ml-sm",attrs:{flat:"",color:"primary",label:"Voltar"},on:{click:function(a){return e.$refs.stepper.previous()}}}):e._e()],1)]},proxy:!0}]),model:{value:e.step,callback:function(a){e.step=a},expression:"step"}},[t("q-step",{attrs:{name:1,title:"Email",icon:"email",done:e.step>1,"header-nav":e.step>1}},[t("q-input",{attrs:{filled:"","lazy-rules":"",autofocus:"",type:"email",label:"Seu email"},model:{value:e.formulario.email,callback:function(a){e.$set(e.formulario,"email",a)},expression:"formulario.email"}})],1),t("q-step",{attrs:{name:2,title:"Senha",icon:"password"}},[t("q-input",{ref:"senha",attrs:{filled:"","lazy-rules":"",label:"Sua senha",type:e.isPwd?"password":"text"},scopedSlots:e._u([{key:"append",fn:function(){return[t("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(a){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.formulario.senha,callback:function(a){e.$set(e.formulario,"senha",a)},expression:"formulario.senha"}})],1)],1)],1)],1)},i=[],n=(t("c975"),t("e6cf"),t("758b")),l={data(){return{step:1,isPwd:!0,formulario:{senha:"",email:"",idCliente:"",passwordhash:""}}},methods:{async getUrl(){return n["a"].post("index.php",{action:"login_direct_user",uid:this.formulario.idCliente}).then((e=>{if("success"===e.data.result)return this.url=e.data.redirect_url,window.location.href=this.url,!0;console.log("Erro nos dados informados")})),!1},async login(){""===this.formulario.email||(this.$refs.senha.hasError||""===this.formulario.senha?this.mostrarMensagem("Para continuar, por favor informe uma senha."):(console.log({action:"login",email:this.formulario.email,senha:this.formulario.senha}),n["a"].post("index.php",{action:"login",email:this.formulario.email,senha:this.formulario.senha}).then((e=>{console.log(e),"success"===e.data.result?(this.formulario.idCliente=e.data.userid,this.formulario.passwordhash=e.data.passwordhash,this.getUrl()):"Email or Password Invalid"===e.data.message&&this.mostrarMensagem("Email ou Senha Invalido")})).catch((e=>{console.log(e)}))))},nextStep(){2!==this.step?(console.log(this.formulario.email.indexOf("@")),console.log(this.formulario.email.length-1),""===this.formulario.email||-1===this.formulario.email.indexOf("@")||this.formulario.email.indexOf("@")===this.formulario.email.length-1?this.mostrarMensagem("Para continuar, por favor informe um email vÃ¡lido."):this.$refs.stepper.next()):this.login()},mostrarMensagem(e){this.$q.notify({progress:!0,message:e,color:"primary",multiLine:!0,actions:[{label:"Entendi",color:"yellow",handler:()=>{}}]})}}},m=l,u=t("2877"),c=t("0378"),p=t("f531"),f=t("87fe"),h=t("27f9"),d=t("0016"),g=t("b19c"),v=t("9c40"),b=t("eebe"),w=t.n(b),x=Object(u["a"])(m,r,i,!1,null,null,null),y=x.exports;w()(x,"components",{QForm:c["a"],QStepper:p["a"],QStep:f["a"],QInput:h["a"],QIcon:d["a"],QStepperNavigation:g["a"],QBtn:v["a"]});var q={components:{steps:y},name:"PageIndex",created(){},methods:{}},P=q,S=t("9989"),_=Object(u["a"])(P,s,o,!1,null,null,null);a["default"]=_.exports;w()(_,"components",{QPage:S["a"]})}}]);