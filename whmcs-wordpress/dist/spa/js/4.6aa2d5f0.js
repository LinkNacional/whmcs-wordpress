(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{},[a("loginForm")],1)},s=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-xl"},[a("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:"","done-color":"green","header-nagivation":!1,"no-header-navigation":""},scopedSlots:e._u([{key:"navigation",fn:function(){return[a("q-stepper-navigation",[a("q-btn",{staticStyle:{color:"##0C71C3"},attrs:{color:"primary",label:2===e.step?"Entrar":"Proximo"},on:{click:function(t){return e.nextStep()}}}),e.step>1?a("q-btn",{staticClass:"q-ml-sm",staticStyle:{color:"##0C71C3"},attrs:{flat:"",label:"Voltar"},on:{click:function(t){return e.$refs.stepper.previous()}}}):e._e(),a("q-btn",{staticClass:"q-ml-sm float-right",attrs:{flat:"",color:"primary",to:"https://whmcs.linknacional.com.br/register.php",label:"Registrar"}}),a("q-btn",{staticClass:"q-ml-sm float-right",staticStyle:{color:"#E31E17"},attrs:{flat:"",to:"https://whmcs.linknacional.com.br/index.php?rp=/password/reset",label:"Esqueceu a senha?"}})],1)]},proxy:!0}]),model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("q-step",{attrs:{name:1,icon:"email",done:e.step>1,title:"email"}},[a("div",{staticClass:"q-ma-none q-pb-lg"},[a("div",{staticClass:"text-h4 text-weight-thin"},[e._v("Login")]),a("hr")]),a("q-input",{ref:"email",attrs:{filled:"",autofocus:"",type:"email",label:"Seu email",rules:[function(e){return""!==e.email||"Digite um Email"},function(e){return-1!==e.indexOf("@")||"Digite um Email Válido"},function(t){return e.errorInput.errorEmail||"Não existe usuario com este email"},function(e){return e.indexOf("@")!==e.length-1||"Digite um Email Válido"}],"lazy-rules":"ondemand",loading:e.loadingState},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.nextStep(t))}},model:{value:e.formulario.email,callback:function(t){e.$set(e.formulario,"email",t)},expression:"formulario.email"}})],1),a("q-step",{attrs:{name:2,icon:"password",done:e.step>2,title:"senha"}},[a("div",{staticClass:"q-ma-none q-pb-lg"},[a("div",{staticClass:"text-h4 text-weight-thin"},[e._v("Login")]),a("hr")]),a("q-input",{ref:"senha",attrs:{filled:"",label:"Sua senha",type:e.isPwd?"password":"text",autocomplete:"off",rules:[function(t){return e.errorInput.errorPassword||"Digite uma senha válida"}],loading:e.loadingState,"lazy-rules":"ondemand"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.nextStep(t))}},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.formulario.senha,callback:function(t){e.$set(e.formulario,"senha",t)},expression:"formulario.senha"}})],1)],1)],1)},o=[],n=(a("e6cf"),a("758b")),l={props:{},render:{},data(){return{step:1,loadingState:!1,axios:n["b"],isPwd:!0,url:this.requestJson(),formulario:{senha:"",email:"",idCliente:"",passwordhash:""},errorInput:{errorEmail:!0,errorPassword:!0}}},methods:{async requestJson(){var e="/url.json";fetch(e).then((e=>e.json())).then((e=>{this.axios=this.axios(e.link)})).catch((e=>console.error(e)))},async getUrl(){this.axios.post("index.php",{action:"login_direct_user",uid:this.formulario.idCliente}).then((e=>{"success"===e.data.result?(this.url=e.data.redirect_url,window.location.href=this.url):console.log("Erro nos dados informados")})).catch((e=>{console.log(e)}))},async login(){this.$refs.senha.validate(),this.$refs.senha.hasError||""===this.formulario.senha?(this.errorInput.errorPassword=!1,this.$refs.senha.validate(),this.errorInput.errorPassword=!0,this.mostrarMensagem("Para continuar, por favor informe uma senha.")):(this.loadingState=!0,this.axios.post("index.php",{action:"login",email:this.formulario.email,senha:this.formulario.senha}).then((e=>{"success"===e.data.result?(this.formulario.idCliente=e.data.userid,this.formulario.passwordhash=e.data.passwordhash,this.getUrl(),this.loadingState=!1):"Email or Password Invalid"===e.data.message&&(this.loadingState=!1,this.errorInput.errorPassword=!1,this.$refs.senha.validate(),this.errorInput.errorPassword=!0,this.mostrarMensagem("E-mail ou senha inválido"))})).catch((e=>{this.loadingState=!1,console.log(e)})))},nextStep(){1===this.step?(this.$refs.email.validate(),this.$refs.email.hasError||""===this.formulario.email?(this.$refs.email.validate(),this.mostrarMensagem("Para continuar, por favor informe um email válido."),this.$refs.email.focus()):this.checkEmail()):this.login()},async checkEmail(){this.loadingState=!0,this.axios.post("index.php",{action:"email_search_not_phone",email:this.formulario.email}).then((e=>{"success"===e.data.result?(this.$refs.email.validate(),this.$refs.stepper.next(),setTimeout((()=>{this.$refs.senha.focus()}),200)):"notin"===e.data.result&&(this.errorInput.errorEmail=!1,this.$refs.email.validate(),this.errorInput.errorEmail=!0),this.loadingState=!1})).catch((e=>{this.loadingState=!1,console.log(e)}))},mostrarMensagem(e){this.$q.notify({progress:!0,message:e,color:"primary",multiLine:!0,actions:[{label:"Entendi",color:"yellow",handler:()=>{}}]})},btnRegistrar(){window.location.href="https://whmcs.linknacional.com.br/register.php"},btnSenha(){window.location.href="https://whmcs.linknacional.com.br/index.php?rp=/password/reset"}}},c=l,h=a("2877"),u=a("f531"),p=a("87fe"),m=a("27f9"),d=a("0016"),f=a("b19c"),g=a("9c40"),w=a("eebe"),v=a.n(w),x=Object(h["a"])(c,i,o,!1,null,null,null),b=x.exports;v()(x,"components",{QStepper:u["a"],QStep:p["a"],QInput:m["a"],QIcon:d["a"],QStepperNavigation:f["a"],QBtn:g["a"]});var y={components:{loginForm:b},name:"PageIndex",created(){},methods:{}},k=y,S=a("9989"),q=Object(h["a"])(k,r,s,!1,null,null,null);t["default"]=q.exports;v()(q,"components",{QPage:S["a"]})}}]);